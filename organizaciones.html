<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="VeluxeAparelo - Plataforma profesional de administración de comunidades.">
  <meta property="og:title" content="VeluxeAparelo" />
  <meta property="og:description" content="Gestión y administración de comunidades. Simple. Seguro. Poderoso." />
  <meta property="og:image" content="https://i.ibb.co/sdzSkknP/Veluxe-Aparelo.png" />
  <meta property="og:url" content="https://tusitio.com/organizaciones.html" />
  <meta property="og:type" content="website" />
  <link rel="icon" type="image/png" href="https://i.ibb.co/sdzSkknP/Veluxe-Aparelo.png" />
  <title>Organizaciones | VeluxeAparelo</title>
  <link rel="stylesheet" href="assets/css/index.css" />
  <link rel="stylesheet" href="assets/css/orgs.css" />
  <link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
</head>
<body>
  <header>
    <div class="container">
      <h1 class="logo"><a href="index.html">VeluxeAparelo</a></h1>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">Inicio</a></li>
          <li><a href="sobre.html">Sobre Nosotros</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="status.html">Status</a></li>
          <li><a href="servicios.html">Servicios</a></li>
          <li><a href="store.html">Tienda</a></li>
          <li><a href="contacto.html">Contacto</a></li>
          <li><a href="alianzas.html">Alianzas</a></li>
          <li><a href="equipo.html">Equipo</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
  
  
  
  
  
  
  
  
  
  
  

<main>
  <section class="organizaciones">
    <div class="container">
      <h2>Organizaciones</h2>
      <p>Conoce las principales organizaciones con las que trabajamos y colaboramos.</p>

      <!-- Botón para añadir nueva organización -->
      <div class="org-card add-org-card" id="add-org-btn">
        <span class="add-icon">+</span>
        <h3>Añadir organización</h3>
      </div>

      <!-- Aquí se insertarán dinámicamente las tarjetas desde Firestore -->
      <h2>Organizaciones registradas</h2>
      <div class="org-lista" id="org-lista"></div>
    </div>
  </section>
</main>

<!-- Firebase modular desde CDN -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCV-kkU74FYsUMhDgWXhUekc_rdDS8_o4U",
    authDomain: "veluxeaparelo-d96f0.firebaseapp.com",
    databaseURL: "https://veluxeaparelo-d96f0-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "veluxeaparelo-d96f0",
    storageBucket: "veluxeaparelo-d96f0.firebasestorage.app",
    messagingSenderId: "23135435409",
    appId: "1:23135435409:web:63ba7191aa328f61659d30",
    measurementId: "G-8SNYZGTSZL"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const CODIGO_VALIDACION = "VELUXE2025";

  document.getElementById("add-org-btn").addEventListener("click", () => {
    const codigo = prompt("Introduce el código de validación:");
    if (codigo === CODIGO_VALIDACION) {
      mostrarFormulario();
    } else {
      alert("Código incorrecto. No tienes permiso para añadir organizaciones.");
    }
  });

  function mostrarFormulario() {
    const container = document.createElement("div");
    container.innerHTML = `
      <div class="org-form-modal" style="background:#222; padding:20px; border-radius:8px; max-width:400px; margin:2rem auto; box-shadow:0 0 15px rgba(0,0,0,0.4); color:white;">
        <h2>Añadir Organización</h2>
        <input type="text" id="org-nombre" placeholder="Nombre" required style="display:block;width:100%;margin-bottom:10px;padding:8px;">
        <input type="text" id="org-descripcion" placeholder="Descripción" required style="display:block;width:100%;margin-bottom:10px;padding:8px;">
        <input type="url" id="org-imagen" placeholder="URL de la imagen" required style="display:block;width:100%;margin-bottom:10px;padding:8px;">
        <input type="url" id="org-enlace" placeholder="Enlace (opcional)" style="display:block;width:100%;margin-bottom:10px;padding:8px;">
        <select id="org-estado" style="display:block;width:100%;margin-bottom:15px;padding:8px;">
          <option value="habilitado">Habilitado</option>
          <option value="deshabilitado">Deshabilitado</option>
        </select>
        <button id="org-submit" style="padding:10px 20px; margin-right:10px;">Guardar</button>
        <button id="org-cancel" style="padding:10px 20px;">Cancelar</button>
      </div>
    `;
    document.body.appendChild(container);

    document.getElementById("org-submit").addEventListener("click", async () => {
      const nombre = document.getElementById("org-nombre").value.trim();
      const descripcion = document.getElementById("org-descripcion").value.trim();
      const imagen = document.getElementById("org-imagen").value.trim();
      const enlace = document.getElementById("org-enlace").value.trim();
      const estado = document.getElementById("org-estado").value;

      if (!nombre || !descripcion || !imagen || !estado) {
        return alert("Por favor completa todos los campos obligatorios.");
      }

      try {
        await addDoc(collection(db, "organizaciones"), {
          nombre,
          descripcion,
          imagen,
          enlace,
          estado,
          fecha: new Date()
        });
        alert("Organización añadida correctamente.");
        location.reload();
      } catch (e) {
        console.error("Error al guardar:", e);
        alert("Hubo un error al guardar.");
      }
    });

    document.getElementById("org-cancel").addEventListener("click", () => {
      container.remove();
    });
  }

  async function mostrarOrganizaciones() {
    const contenedor = document.getElementById("org-lista");
    if (!contenedor) return;

    contenedor.innerHTML = "<p>Cargando organizaciones...</p>";

    try {
      const snapshot = await getDocs(collection(db, "organizaciones"));
      contenedor.innerHTML = ""; 
      if (snapshot.empty) {
        contenedor.innerHTML = "<p>No hay organizaciones registradas.</p>";
        return;
      }
      snapshot.forEach(docSnap => {
        const org = docSnap.data();
        const card = document.createElement("div");
        card.classList.add("org-card");
        if (org.estado === "deshabilitado") {
          card.classList.add("disabled-card");
        }

        card.innerHTML = `
          <img src="${org.imagen}" alt="${org.nombre}">
          <h3>${org.enlace ? `<a href="${org.enlace}" target="_blank">${org.nombre}</a>` : org.nombre}</h3>
          <p>${org.descripcion}</p>
          ${org.estado === "deshabilitado"
            ? `<button class="btn-join-disabled">No disponible</button>`
            : org.enlace ? `<a href="${org.enlace}" target="_blank" class="btn-join">Entrar</a>` : ""
          }
        `;
        contenedor.appendChild(card);
      });
    } catch (err) {
      console.error("Error cargando organizaciones:", err);
      contenedor.innerHTML = "<p>Error al cargar organizaciones.</p>";
    }
  }

  document.addEventListener("DOMContentLoaded", mostrarOrganizaciones);
</script>

<script type="module" src="assets/js/service1.js"></script>




  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2025 VeluxeAparelo. Todos los derechos reservados.</p>
      <div class="footer-links">
        <a href="https://www.instagram.com/veluxeaparelo/" target="_blank">Instagram</a>
        <a href="https://www.tiktok.com/@veluxeaparelo" target="_blank">TikTok</a>
        <a href="contacto.html">Contáctanos</a>
      </div>
    </div>
  </footer>
</body>
</html>
